{
    "collab_server" : "",
    "contents" : "#*********************************************************************#\n## ERROR in PLOT_FAULT_LINES_Mw\n## \n#CHECK NO LOAD IN ANY FUNCTION!!!!\n\n#Setup\nlibraries <- c('evd','scales','raster','SDMTools','rgdal','fitdistrplus','epiR','rgeos','ggplot2','maptools','broom','ggmap','plyr','stats4','QRM')\n#lapply(libraries, install.packages, character.only = TRUE)\nlapply(libraries, require, character.only = TRUE)\n\ngpclibPermit()\noptions(expressions=100000)\nsetwd('C:/Users/Peter/Documents/Earthquake_v4/Earthquake_v4/ALL_FUNCTIONS')\n\n\n#**********************************************************************#\n\n#Get the Historical EQ Data\nsource('02_01_Get_Data_Ready.R')\nEQ_Data <- get_EQ_data()\nFL_Data <- get_FL_data()\nMap <- get_Map()\n#Plot the EQ points\n\n\nsource('02_02_Plot_Events.R')\nPlot_EQ_Events(EQ_Data,FL_Data,Map)\nPlot_EQ_Events_Mw(EQ_Data,Map)\nPlot_EQ_Data(EQ_Data)\nPlot_Fault_Lines(FL_Data,Map)\nPlot_Fault_Lines_Mw(FL_Data,Map)\n\n#GET THE AMAX SERIES FOR ALL DATA\nsource('02_04_GetAMAXSERIES.R')\nAMAX <- get_AMAX(EQ_Data)\n\n\n#Determine the Weibull series\nsource('02_03_Get_Distribution_V3.R')\ndgumbel <- function(x, a, b) 1/b*exp((a-x)/b)*exp(-exp((a-x)/b))\npgumbel <- function(q, a, b) exp(-exp((a-q)/b))\nqgumbel <- function(p, a, b) a-b*log(-log(p))\nMLE_values <- fit_distribution(AMAX)\nret_p <- seq(10,10000,by=10)\nplot_Gamma(MLE_values,ret_p)\n\nsource('02_15_Experiment_Distr.R')\nplot_Experiment1(AMAX,ret_p)\n\n#***********************************************************************#\n\n#Separate Data between Faults\n#REMEMBER TO REPEAT WITH SPLITTING THE FL's\n\n#Match EQ Events to FL's\n#source('02_06_Match_EQ_To_Faults.R')\n#Matched_Data <- Match_Eq_To_FL(EQ_Data,FL_Data)\n\n#SAVE THE DF AS THERE IS A LOT OF COMPUTING TIME HERE\n#save(Matched_Data, file=\"Matched_EQtoFaultLines.rda\")\nload(\"Matched_EQtoFaultLines.rda\")\n\n#Plot the Faultline activity\nsource('02_07_Plot_FL_Activity.R')\nplot_FL_Act(Map,FL_Data,Matched_Data)\n\n\n#**************************************************************#\nsource('02_02_Plot_Events.R')\nPlot_EQ_Events_Mw(EQ_Data,Map)\n\n\n\nsetwd('C:/Users/Peter/Documents/Earthquake_v4/Earthquake_v4/ALL_FUNCTIONS')\n#Now individual FL AMAX series\nsource('02_08_Export_Fault_Specific_Data.R')\nExport_Fl_Spec_Data(EQ_Data,FL_Data)\n\n#Get dataframe of combined AMAX series\nsource('02_09_Fault_Specific_Log_Norm_COMBFL_v1.R')\n#rm(AMAX.df)\nAMAX.df <- Fl_Spec_Log_Norm()\n\n#Determine the Log-Normal series combined data\nsource('02_03_Get_Distribution_V3_FL_COMB.R')\nsource('03_03_Distributions.R')\nMLE_values2 <- fit_distribution(AMAX.df)\n\n\n\n#***************************************************************************#\n#Now distribution is decided time for individual fault lines...\n#rm(Fault_Spec_Log_norm)\n#Individual FL Log_Norm\n# AM <- AMAX_Data_check2\n# AM$Year <- AM$AMAX\n# colnames(AM) <- c('left','right')\n# AM$right[AM$right == 0] <- 4\n# fitdistcens(AM, 'lnorm')\n#SOMETHING WRONG HERE!!!!!! MW SHOULD BE MAX OF 9!!!!\n\nsource('02_09_Fault_Specific_Gamma.R')\nret_p <- c(10,100,500,1000,10000)\nFault_Spec_Gamma <- Fl_Spec_Gamma_Mw(ret_p)\nfl2 <- Fault_Spec_Gamma\nsource('02_16_Experiment_Distr2.R')\nplot_Experiment2(ret_p)\n\n#Obtain return period Mw for certain values\n\nFault_Spec_Gamma <- get_rp_Mw(Fault_Spec_Gamma,ret_p)\nFault_Spec_Gamma <- Fault_Spec_Gamma\nmax(Fault_Spec_Gamma$X500)\nFault_Spec_Gamma$X500[Fault_Spec_Gamma$X500>8.8] <- 8.8\nFault_Spec_Gamma$X1000[Fault_Spec_Gamma$X1000>8.8] <- 8.8\nFault_Spec_Gamma$X10000[Fault_Spec_Gamma$X10000>8.8] <- 8.8\n\n#Plot the Faultline Mw\nsource('02_10_Plot_FL_Mw.R')\n#CHANGE WHEN FIX MW PROBLEM!!!!\nplot_FL_Mw(Map,FL_Data,Fault_Spec_Gamma,Fault_Spec_Gamma2)\n\n#save.image(file=\"workspace2.RData\")\n#load(\"workspace2.RData\")\n\n#Get the Population Data\nsource('02_01_Get_Data_Ready.R')\nPopulation_Data <- get_pop_Data()\n\n#Plot the Population Data\nsetwd('C:/Users/Peter/Documents/Earthquake_v4/Earthquake_v4/ALL_FUNCTIONS')\nsource('02_11_Plot_Pop_Data.R')\nrm(Pop.sp3.points)\nload(file = 'FORTIFIED.R')\nplotPop(Population_Data, Map,Pop.sp3.points)\n#save.image(file = 'workspace3.RData')\nload(file = 'workspace3.RData')\n#ADD KM DIFF AND 1.1 STUFF!!\n#CHECK VALUES OUTPUT!!\nrm(matrix)\nsetwd('C:/Users/Peter/Documents/Earthquake_v4/Earthquake_v4/ALL_FUNCTIONS')\nsource('02_12_Setup2Diss.R')\nDissipate_Fault_Lines(Fault_Spec_Gamma,FL_Data,Population_Data)\n#rm(FL_Data3)\n?write.table\nsetwd('C:/Users/Peter/Documents/Earthquake_v4/Earthquake_v4/ALL_FUNCTIONS')\nsource('02_13_Combine_Raster.R')\nCombine_FL_Diss(Population_Data)\n\nPopulation_Data@bbox\nPopulation_Data@bbox[1,2]\nsetwd('C:/Users/Peter/Documents/Earthquake_v4/Earthquake_v4/ALL_FUNCTIONS')\n#save.image('h.RData')\n#load('h.RData')\n\nsource('02_14_Plot_Indiv_Mw_Diss.R')\nplotMw_Raster()\n\nsetwd('C:/Users/Peter/Documents/Earthquake_v4/Earthquake_v4/ALL_FUNCTIONS')\nsource('02_13_Plot_Mw_Raster.R')\nCombined_FL_Data <- plotMw_Raster2(Population_Data, Map)\n\nsetwd('C:/Users/Peter/Documents/Earthquake_v4/Earthquake_v4/ALL_FUNCTIONS')\nsource('02_14_Risk_Map.R')\n\n",
    "created" : 1491082836290.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "893169719",
    "id" : "629281B1",
    "lastKnownWriteTime" : 1491123029,
    "last_content_update" : 1491123029692,
    "path" : "~/Earthquake_v4/Earthquake_v4/ALL_FUNCTIONS/01_01_Master.R",
    "project_path" : "ALL_FUNCTIONS/01_01_Master.R",
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}